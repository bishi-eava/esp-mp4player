; PlatformIO Project Configuration File
; ESP32-S3 MP4 Movie Player - Multi-board support
;
; Build for specific board:
;   pio run -e atoms3r_spk
;   pio run -e atoms3r
;   pio run -e spotpear

[platformio]
default_envs = atoms3r_spk

[env]
platform = espressif32 @ ^6.5.0
framework = espidf
monitor_speed = 115200
upload_speed = 921600

; --- M5Stack Atom S3R + SPK Base (GC9107 128x128, NS4168 I2S Audio) ---
; Octal PSRAM, 8MB Flash, DIO (board default)
; Custom partition: 3MB app (esp_audio_codec requires more Flash than default 1MB)
[env:atoms3r_spk]
board = m5stack-atoms3
board_build.partitions = partitions_8MB.csv
build_flags =
    -DBOARD_HAS_PSRAM
    -DBOARD_ATOMS3R_SPK
    -DBOARD_HAS_AUDIO
board_build.cmake_extra_args =
    -DSDKCONFIG_DEFAULTS=sdkconfig.defaults.atoms3r_spk

; --- M5Stack Atom S3R (GC9107 128x128) + ATOMIC TF Card Reader ---
; Octal PSRAM, 8MB Flash, DIO (board default)
[env:atoms3r]
board = m5stack-atoms3
board_build.partitions = partitions_8MB.csv
build_flags =
    -DBOARD_HAS_PSRAM
    -DBOARD_ATOMS3R
board_build.cmake_extra_args =
    -DSDKCONFIG_DEFAULTS=sdkconfig.defaults.atoms3r

; --- SpotPear ESP32-S3 LCD 1.3inch (ST7789 240x240) ---
; Octal PSRAM, 16MB Flash, QIO
[env:spotpear]
board = esp32-s3-devkitm-1
board_build.flash_mode = qio
board_build.f_flash = 80000000L
board_build.partitions = partitions_8MB.csv
build_flags =
    -DBOARD_HAS_PSRAM
    -DBOARD_SPOTPEAR
board_build.cmake_extra_args =
    -DSDKCONFIG_DEFAULTS=sdkconfig.defaults.spotpear
